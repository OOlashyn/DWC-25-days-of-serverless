{"$schema":"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#","contentVersion":"1.0.0.0","parameters":{"logicAppName":{"type":"String","metadata":{"description":"Name of the logic app."}},"logicAppLocation":{"defaultValue":"[resourceGroup().location]","allowedValues":["eastasia","southeastasia","centralus","eastus","eastus2","westus","northcentralus","southcentralus","northeurope","westeurope","japanwest","japaneast","brazilsouth","australiaeast","australiasoutheast","southindia","centralindia","westindia","canadacentral","canadaeast","westcentralus","westus2","[resourceGroup().location]"],"type":"String","metadata":{"description":"Location of the logic app."}},"flowpush_Connection_Name":{"defaultValue":"flowpush","type":"String","metadata":{"description":"Name of the connection."}}},"resources":[{"type":"Microsoft.Logic/workflows","name":"[parameters('logicAppName')]","apiVersion":"2016-06-01","location":"[parameters('logicAppLocation')]","properties":{"state":"Disabled","definition":{"$schema":"https://schema.management.azure.com/providers/Microsoft.Logic/schemas/2016-06-01/workflowdefinition.json#","contentVersion":"1.0.0.0","parameters":{"$connections":{"defaultValue":{},"type":"Object"},"$authentication":{"defaultValue":{},"type":"SecureObject"}},"triggers":{"Start_on_December_13_at_8:00_AM_Stockholm_time,_recurrence:_once_a_year":{"recurrence":{"frequency":"Month","interval":12,"timeZone":"W. Europe Standard Time","startTime":"2019-12-13T08:00:00.000Z"},"type":"Recurrence"}},"actions":{"Notification:_Start_the_coffee,_set_out_4_cups":{"runAfter":{},"metadata":{"flowSystemMetadata":{"swaggerOperationId":"SendNotification"}},"type":"ApiConnection","inputs":{"host":{"connection":{"name":"@parameters('$connections')['flowpush']['connectionId']"}},"method":"post","body":{"notificationText":"Start the coffee, set out 4 cups"},"path":"/sendNotification","authentication":"@parameters('$authentication')"}},"Delay_for_25_min,_8:25_AM":{"runAfter":{"Notification:_Start_the_coffee,_set_out_4_cups":["Succeeded"]},"type":"Wait","inputs":{"interval":{"count":25,"unit":"Minute"}}},"Notification:_Pour_two_cups":{"runAfter":{"Delay_for_25_min,_8:25_AM":["Succeeded"]},"metadata":{"flowSystemMetadata":{"swaggerOperationId":"SendNotification"}},"type":"ApiConnection","inputs":{"host":{"connection":{"name":"@parameters('$connections')['flowpush']['connectionId']"}},"method":"post","body":{"notificationText":"Pour two cups"},"path":"/sendNotification","authentication":"@parameters('$authentication')"}},"Delay_for_5_min,_8:30_AM":{"runAfter":{"Notification:_Pour_two_cups":["Succeeded"]},"type":"Wait","inputs":{"interval":{"count":5,"unit":"Minute"}}},"Notification:_Light_the_candles":{"runAfter":{"Delay_for_5_min,_8:30_AM":["Succeeded"]},"metadata":{"flowSystemMetadata":{"swaggerOperationId":"SendNotification"}},"type":"ApiConnection","inputs":{"host":{"connection":{"name":"@parameters('$connections')['flowpush']['connectionId']"}},"method":"post","body":{"notificationText":"Light the candles"},"path":"/sendNotification","authentication":"@parameters('$authentication')"}},"Delay_for_5_min,_8:35_AM":{"runAfter":{"Notification:_Light_the_candles":["Succeeded"]},"type":"Wait","inputs":{"interval":{"count":5,"unit":"Minute"}}},"Notification:_Deliver_the_coffee_to_Mom_and_Dad":{"runAfter":{"Delay_for_5_min,_8:35_AM":["Succeeded"]},"metadata":{"flowSystemMetadata":{"swaggerOperationId":"SendNotification"}},"type":"ApiConnection","inputs":{"host":{"connection":{"name":"@parameters('$connections')['flowpush']['connectionId']"}},"method":"post","body":{"notificationText":"Deliver the coffee to Mom and Dad"},"path":"/sendNotification","authentication":"@parameters('$authentication')"}},"Delay_for_4_min,_8:39_AM":{"runAfter":{"Notification:_Deliver_the_coffee_to_Mom_and_Dad":["Succeeded"]},"type":"Wait","inputs":{"interval":{"count":4,"unit":"Minute"}}},"Notification:_Return_to_kitchen,_fill_two_more_cups":{"runAfter":{"Delay_for_4_min,_8:39_AM":["Succeeded"]},"metadata":{"flowSystemMetadata":{"swaggerOperationId":"SendNotification"}},"type":"ApiConnection","inputs":{"host":{"connection":{"name":"@parameters('$connections')['flowpush']['connectionId']"}},"method":"post","body":{"notificationText":"Return to kitchen, fill two more cups"},"path":"/sendNotification","authentication":"@parameters('$authentication')"}},"Delay_for_1_min,_8:40_AM":{"runAfter":{"Notification:_Return_to_kitchen,_fill_two_more_cups":["Succeeded"]},"type":"Wait","inputs":{"interval":{"count":1,"unit":"Minute"}}},"Notification:_Relight_the_candles":{"runAfter":{"Delay_for_1_min,_8:40_AM":["Succeeded"]},"metadata":{"flowSystemMetadata":{"swaggerOperationId":"SendNotification"}},"type":"ApiConnection","inputs":{"host":{"connection":{"name":"@parameters('$connections')['flowpush']['connectionId']"}},"method":"post","body":{"notificationText":"Relight the candles"},"path":"/sendNotification","authentication":"@parameters('$authentication')"}},"Delay_for_5_min,_8:45_AM":{"runAfter":{"Notification:_Relight_the_candles":["Succeeded"]},"type":"Wait","inputs":{"interval":{"count":5,"unit":"Minute"}}},"Notification:_Deliver_the_coffee_to_Sister_and_Brother":{"runAfter":{"Delay_for_5_min,_8:45_AM":["Succeeded"]},"metadata":{"flowSystemMetadata":{"swaggerOperationId":"SendNotification"}},"type":"ApiConnection","inputs":{"host":{"connection":{"name":"@parameters('$connections')['flowpush']['connectionId']"}},"method":"post","body":{"notificationText":"Deliver the coffee to Sister and Brother"},"path":"/sendNotification","authentication":"@parameters('$authentication')"}},"Delay_for_4_min,_8:49_AM":{"runAfter":{"Notification:_Deliver_the_coffee_to_Sister_and_Brother":["Succeeded"]},"type":"Wait","inputs":{"interval":{"count":4,"unit":"Minute"}}},"Notification:_Return_to_kitchen,_take_a_break!":{"runAfter":{"Delay_for_4_min,_8:49_AM":["Succeeded"]},"metadata":{"flowSystemMetadata":{"swaggerOperationId":"SendNotification"}},"type":"ApiConnection","inputs":{"host":{"connection":{"name":"@parameters('$connections')['flowpush']['connectionId']"}},"method":"post","body":{"notificationText":"Return to kitchen, take a break!"},"path":"/sendNotification","authentication":"@parameters('$authentication')"}}}},"parameters":{"$connections":{"value":{"flowpush":{"id":"[concat('/subscriptions/', subscription().subscriptionId, '/providers/Microsoft.Web/locations/', parameters('logicAppLocation'), '/managedApis/', 'flowpush')]","connectionId":"[resourceId('Microsoft.Web/connections', parameters('flowpush_Connection_Name'))]","connectionName":"[parameters('flowpush_Connection_Name')]"}}}},"runtimeConfiguration":{"lifetime":{"unit":"Day","count":30},"collections":{"maximumItemCount":100000},"performanceProfile":{"throttles":{"mode":"Medium"}}}},"dependsOn":["[resourceId('Microsoft.Web/connections', parameters('flowpush_Connection_Name'))]"]},{"type":"Microsoft.Web/connections","name":"[parameters('flowpush_Connection_Name')]","apiVersion":"2016-06-01","location":"[parameters('logicAppLocation')]","properties":{"api":{"id":"[concat('/subscriptions/', subscription().subscriptionId, '/providers/Microsoft.Web/locations/', parameters('logicAppLocation'), '/managedApis/', 'flowpush')]"},"displayName":"[parameters('flowpush_Connection_Name')]"}}]}